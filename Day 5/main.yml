---
- name: Launch an EC2 instance with a public IP
  amazon.aws.ec2_instance:
    name: "ansible-instance"
    # key_name: "ALL"         # Uncomment and set your key
    # vpc_subnet_id: "subnet-xxxxxxx" # Uncomment and set your subnet if needed
    instance_type: t3.micro
    security_group: ALL
    region: us-east-1
    aws_access_key: "{{ ec2_access_key }}"   # From vault or vars
    aws_secret_key: "{{ ec2_secret_key }}"   # From vault or vars
    network:
      assign_public_ip: true
    image_id: ami-04b70fa74e45c3917
    tags:
      Environment: Testing

